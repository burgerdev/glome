---
authors: Markus Rudy (@burgerdev)
state: discussion
---

# Objective

Define a format for GLOME public keys at rest.

# Background

The GLOME protocol definition does not deal with key material handling, and the
reference implementation only implements a very rudimentary storage format -
32 raw octets. This causes a variety of problems, e.g. when transferring keys
between hosts or when specifying server keys for *GLOME Login*.

See also [google/glome#100](https://github.com/google/glome/issues/100).

# Requirements

* A GLOME public key at rest should be unambiguously identifiable as such.
* Public keys should be printable.
* Public keys should be easily exchanged over any medium, potentially analog.
* The public key format should allow associating additional context with a key.

# Design ideas

Note: this design is, generally speaking, a copy of
[OpenSSH's `authorized_keys` format][1].

[1]: https://man.openbsd.org/sshd.8#AUTHORIZED_KEYS_FILE_FORMAT

## Public Key Format

Let the 32 octects produced by `glome_derive_key` be called the _raw GLOME
public key_.

The format of a _GLOME public key_ adheres to the ABNF below:

```abnf
public-key = key-type sep key-base64 [ sep [ comment ] ]
key-type = "glome-x25519-sha256"
key-base64 = 44base64-char
base64-char = "=" / "+" / "/" / ALPHA / DIGIT
sep = 1*SP
comment = %x21-7e *%x20-7e
```

TODO:
- mention extensibility of key-type
- split into `public-key` and `annotated-public-key`

## Public Key Interpretation

TODO:
- Verify that `key-type` matches expectations.
- Describe what to encode/decode.

## Consequences for the GLOME Login Configuration Format



TODO
